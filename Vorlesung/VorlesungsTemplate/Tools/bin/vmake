#!/usr/bin/perl -w

use Env qw(HOME);

@VorlDir = ( "$HOME/LehreAllgemein/VorlesungsTemplate",
             "$HOME/Bibl",
	     "$HOME/InformatikI/VorlesungA",
	     "$HOME/InformatikI/VorlesungB",
             "$HOME/OOP/Vorlesung",
             "$HOME/Java/Vorlesung",
             "$HOME/Bildgenerierung/Vorlesung",
             "$HOME/AlgGeom/Vorlesung",
	     "$HOME/InfImAll/ModImpl",
	     "$HOME/WuA/Mathematica",
	     "$HOME/WuA/Versionsverwaltung",
	     "$HOME/ModProg/Lecture",
	     "$HOME/ModProg/CompIntr",
	     "$HOME/Tools/Lecture",
	     "$HOME/AlgDS/Lecture" );

@BaseDir = @VorlDir;
foreach $b (@BaseDir)
{
    $b =~ s/$HOME\///;
}

for ($i = 0; $i <= $#VorlDir; $i++)
{
    printf "[33;40;1m %-33s  %40s [0m\n", $BaseDir[$i], "make @ARGV";
    $status[$i] = system("make", "--no-print-directory", "-C", "$VorlDir[$i]",
			 @ARGV);
}
for ($i = 0; $i <= $#VorlDir; $i++)
{
    if (!$status[$i])
    {
	printf "[32;40;1m %-33s  %40s [0m\n", $BaseDir[$i], "ok";
    }
    else
    {
	printf "[31;40;1m %-33s  %40s [0m\n", $BaseDir[$i], "failed";
    }
}
